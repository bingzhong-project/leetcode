# Course Schedule

[问题描述](https://leetcode.com/problems/course-schedule/)

## 知识点

深度优先搜索，广度优先搜索，图，拓扑排序

## 解题思路

解题的思路在于证明图是否存在环。  
首先要解决的是如何根据题目给出的边集合构建出图。这里使用**邻接表**的方式表示图。  
示例如下，分别为有向图和基于有向图构建的邻接表：  
![有向图示例](https://bingzhong-project.gitee.io/public/pictures/有向图示例.png)  
![邻接表示例](https://bingzhong-project.gitee.io/public/pictures/邻接表示例.png)

### 深度优先搜索

使用一个数组 visited 用于记录每个节点的状态。有以下三种状态：

- 0 为初始值，表示未被发现
- -1 表示节点被发现
- 1 表示完成了扫描过程（所在子树完成了深度优先搜索）

当在遍历过程，遇到 -1 状态的节点，即表示图存在环。只有在深度优先搜索的过程中，才会存在 -1 状态的节点，如果遇到了 -1 状态的节点，即表示在遍历的过程中回到了之前遍历过的某个节点中，即存在环。  
而如果遇到 1 状态的节点，则表示后续的遍历过程已经完成过了，继续当前的遍历过程只是重复上次的遍历过程，后续需要遍历的子图不会存在环，直接结束当前的遍历即可。

### 广度优先搜索

利用广度优先搜索去判断图是否有环，先要记录每个结点的入度，先将所有入度为 0 的结点入队。当结点出队时，与该结点相邻的结点的入度都需要减一，然后将入度为 0 的结点入队。整体的流程就是逐步将入度为 0 的结点去除，在这个过程中，还需要为每个出队的结点计数，其实就是记录结点拓扑排序的序号。最后如果记录的拓扑排序的序号不等于结点数，则表示图有环，没有完成对图的拓扑排序。
